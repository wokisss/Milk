{% extends 'base.html' %}
{% block content %}
<h2>牧民详细信息</h2>

<div class='farmer-details'>
  <div class='detail-row'>
    <strong>姓名：</strong>{{farmer.name}}
  </div>
  <div class='detail-row'>
    <strong>身份证号：</strong>{{farmer.id_card}}
  </div>
  <div class='detail-row'>
    <strong>银行卡号：</strong>{{farmer.bank_card if farmer.bank_card else '未填写'}}
  </div>
  <div class='detail-row'>
    <strong>联系方式：</strong>{{farmer.phone}}
  </div>
  <div class='detail-row'>
    <strong>家庭住址：</strong>{{farmer.address}}
  </div>
  <div class='detail-row'>
    <strong>所属奶站编号：</strong>{{farmer.milk_station_id}}
  </div>
</div>

<div class='action-buttons'>
  <a href='/farmer/edit/{{farmer.id}}' class='btn btn-primary'>编辑</a>
  <a href='/farmers' class='btn btn-secondary'>返回列表</a>
</div>

{% if purchases %}
<h3>该牧民的收购记录</h3>
<table class='table'>
  <thead>
    <tr>
      <th>数量</th>
      <th>单价</th>
      <th>总价</th>
      <th>地点</th>
      <th>时间</th>
      <th>备注</th>
    </tr>
  </thead>
  <tbody>
    {% for p in purchases %}
    <tr>
      <td>{{p.quantity}} kg</td>
      <td>¥{{p.price_per_unit}}</td>
      <td>¥{{p.total_price}}</td>
      <td>{{p.location}}</td>
      <td>{{p.created_at.strftime('%Y-%m-%d %H:%M') if p.created_at else 'N/A'}}</td>
      <td>{{p.note if p.note else '-'}}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>该牧民暂无收购记录</p>
{% endif %}

<style>
.farmer-details {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 8px;
  margin-bottom: 20px;
}

.detail-row {
  margin-bottom: 15px;
  padding: 10px;
  border-bottom: 1px solid #e9ecef;
}

.detail-row:last-child {
  border-bottom: none;
}

.detail-row strong {
  color: #2c7744;
  display: inline-block;
  width: 120px;
}

.action-buttons {
  margin: 20px 0;
}

.action-buttons .btn {
  margin-right: 10px;
}
</style>
{% endblock %}