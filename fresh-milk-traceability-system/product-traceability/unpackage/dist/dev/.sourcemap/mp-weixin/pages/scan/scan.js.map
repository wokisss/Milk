{"version":3,"file":"scan.js","sources":["pages/scan/scan.vue","../../../../Hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2Nhbi9zY2FuLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"scan-page\">\n    <!-- 顶部标题栏 -->\n    <view class=\"scan-header\">\n      <text class=\"title\">扫码溯源</text>\n    </view>\n\n    <!-- 扫码按钮 -->\n    <view class=\"scan-btn\" @click=\"openScan\">\n      <image src=\"https://via.placeholder.com/120x120?text=扫码\" mode=\"aspectFit\" class=\"scan-icon\" />\n      <text class=\"btn-text\">点击扫码查询溯源信息</text>\n    </view>\n\n    <!-- 扫码结果展示（失败时显示，成功后直接跳转） -->\n    <view class=\"result-box\" v-if=\"scanResult === '扫码失败'\">\n      <text class=\"result-label\">扫码结果：</text>\n      <text class=\"result-content error-color\">{{ scanResult }}</text>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\n\n// 扫码结果（仅用于展示失败状态）\nconst scanResult = ref('');\n\n// 打开摄像头扫码\nconst openScan = () => {\n  uni.scanCode({\n    scanType: ['qrCode', 'barCode'], // 支持二维码和条形码\n    onlyFromCamera: true, // 仅从摄像头扫码（不允许选择相册）\n    success: (res) => {\n      const scanCode = res.result || '';\n      // 扫码成功：跳转至 select.vue，并携带扫码结果参数\n      if (scanCode) {\n        uni.navigateTo({\n          url: `/pages/select/select?scanCode=${encodeURIComponent(scanCode)}`, // 携带参数跳转\n          success: () => {\n            uni.showToast({ title: '扫码成功，跳转中...', icon: 'success', duration: 1500 });\n            scanResult.value = ''; // 清空失败状态显示\n          },\n          fail: (err) => {\n            uni.showToast({ title: '跳转失败，请重试', icon: 'none' });\n            console.log('跳转select页面失败：', err);\n          }\n        });\n      } else {\n        // 有扫码回调但无结果（异常情况）\n        scanResult.value = '扫码失败';\n        uni.showToast({ title: '扫码失败，未获取到有效信息', icon: 'none', duration: 1500 });\n      }\n    },\n    fail: (err) => {\n      // 扫码失败：仅提示，不跳转\n      scanResult.value = '扫码失败';\n      uni.showToast({ title: '扫码失败，请重试', icon: 'none', duration: 1500 });\n      console.log('扫码失败详情：', err);\n    }\n  });\n};\n</script>\n\n<style scoped>\n.scan-page {\n  background-color: #f5f5f5;\n  height: 100vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 30rpx 20rpx;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n.scan-header {\n  width: 100%;\n  text-align: center;\n  margin-bottom: 80rpx;\n}\n\n.title {\n  font-size: 32rpx;\n  color: #333;\n  font-weight: 600;\n}\n\n.scan-btn {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: #fff;\n  width: 280rpx;\n  height: 280rpx;\n  border-radius: 50%;\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\n  margin-bottom: 60rpx;\n  cursor: pointer;\n}\n\n.scan-icon {\n  width: 120rpx;\n  height: 120rpx;\n  margin-bottom: 20rpx;\n}\n\n.btn-text {\n  font-size: 24rpx;\n  color: #333;\n  text-align: center;\n  padding: 0 20rpx;\n}\n\n.result-box {\n  background-color: #fff;\n  width: 100%;\n  padding: 24rpx;\n  border-radius: 16rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\n}\n\n.result-label {\n  font-size: 26rpx;\n  color: #666;\n  margin-right: 10rpx;\n}\n\n.result-content {\n  font-size: 26rpx;\n  color: #1980FF;\n  word-break: break-all;\n  display: block;\n  margin-top: 10rpx;\n}\n\n/* 失败状态文字颜色 */\n.error-color {\n  color: #ff4d4f;\n}\n\n.query-btn {\n  margin-top: 20rpx;\n  background-color: #1980FF;\n  color: #fff;\n  border-radius: 8rpx;\n  height: 80rpx;\n  line-height: 80rpx;\n  font-size: 26rpx;\n}\n\n.query-btn::after {\n  border: none;\n}\n</style>","import MiniProgramPage from 'D:/桌面/研一/软件工程/product-traceability/pages/scan/scan.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni"],"mappings":";;;;;AAyBA,UAAM,aAAaA,cAAAA,IAAI,EAAE;AAGzB,UAAM,WAAW,MAAM;AACrBC,oBAAAA,MAAI,SAAS;AAAA,QACX,UAAU,CAAC,UAAU,SAAS;AAAA;AAAA,QAC9B,gBAAgB;AAAA;AAAA,QAChB,SAAS,CAAC,QAAQ;AAChB,gBAAM,WAAW,IAAI,UAAU;AAE/B,cAAI,UAAU;AACZA,0BAAAA,MAAI,WAAW;AAAA,cACb,KAAK,iCAAiC,mBAAmB,QAAQ,CAAC;AAAA;AAAA,cAClE,SAAS,MAAM;AACbA,oCAAI,UAAU,EAAE,OAAO,eAAe,MAAM,WAAW,UAAU,KAAI,CAAE;AACvE,2BAAW,QAAQ;AAAA,cACpB;AAAA,cACD,MAAM,CAAC,QAAQ;AACbA,8BAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,OAAM,CAAE;AACjDA,8BAAY,MAAA,MAAA,OAAA,6BAAA,iBAAiB,GAAG;AAAA,cACjC;AAAA,YACX,CAAS;AAAA,UACT,OAAa;AAEL,uBAAW,QAAQ;AACnBA,gCAAI,UAAU,EAAE,OAAO,iBAAiB,MAAM,QAAQ,UAAU,KAAI,CAAE;AAAA,UACvE;AAAA,QACF;AAAA,QACD,MAAM,CAAC,QAAQ;AAEb,qBAAW,QAAQ;AACnBA,8BAAI,UAAU,EAAE,OAAO,YAAY,MAAM,QAAQ,UAAU,KAAI,CAAE;AACjEA,wBAAY,MAAA,MAAA,OAAA,6BAAA,WAAW,GAAG;AAAA,QAC3B;AAAA,MACL,CAAG;AAAA,IACH;;;;;;;;;;;;AC3DA,GAAG,WAAW,eAAe;"}