# 鲜奶溯源小程序 - 开发指南

## ⚠️ 重要说明

这是一个 **UniApp** 项目，**不能直接用微信开发者工具打开根目录**！

---

## 🚀 正确的开发步骤

### 方法一：使用 HBuilderX（推荐）

1. **下载安装 HBuilderX**
   - 官网：https://www.dcloud.io/hbuilderx.html
   - 下载 App 开发版（不是标准版）

2. **打开项目**
   - 用 HBuilderX 打开 `product-traceability2.0` 文件夹

3. **运行到微信小程序**
   - 点击菜单：运行 → 运行到小程序模拟器 → 微信开发者工具
   - 首次运行需要配置微信开发者工具路径

4. **配置 AppID**
   - 打开 `manifest.json`
   - 在「微信小程序配置」中填入你自己的 AppID
   - 或者使用测试号（在微信开发者工具中选择"测试号"）

---

### 方法二：直接用微信开发者工具

1. **先用 HBuilderX 编译一次**
   - 或者使用命令行：`npm run dev:mp-weixin`

2. **用微信开发者工具打开编译后的目录**
   ```
   product-traceability2.0/unpackage/dist/dev/mp-weixin
   ```
   ⚠️ 注意：是打开 `mp-weixin` 目录，不是项目根目录！

3. **修改 AppID**
   - 在微信开发者工具中，点击右上角「详情」
   - 修改 AppID 为你自己的，或选择「测试号」

---

## 🔧 常见问题解决

### 问题1：提示 AppID 错误
**解决方案**：
- 在微信开发者工具中选择「测试号」
- 或者让项目管理员在微信公众平台添加你为开发者

### 问题2：提示找不到文件/模块错误
**解决方案**：
- 确保用 HBuilderX 打开并编译项目
- 不要直接用微信开发者工具打开 UniApp 源码

### 问题3：样式错乱/功能异常
**解决方案**：
- 删除 `unpackage` 文件夹
- 用 HBuilderX 重新编译

### 问题4：db 目录下的后端报错
**解决方案**：
```bash
cd product-traceability2.0/db
npm install
```

---

## 📁 项目结构说明

```
product-traceability2.0/
├── pages/              # 页面目录（UniApp 源码）
│   ├── home/          # 首页
│   ├── scan/          # 扫码页面
│   ├── statistics/    # 统计页面
│   └── ...
├── static/            # 静态资源
├── utils/             # 工具函数
├── db/                # 本地数据库服务（可选）
├── manifest.json      # 应用配置（AppID 在这里配置）
├── pages.json         # 页面配置
├── App.vue            # 应用入口
└── unpackage/         # 编译产物目录（自动生成，不要手动修改）
```

---

## 📱 AppID 配置

### 使用测试号（最简单）
在微信开发者工具中选择「测试号」即可，无需额外配置。

### 使用正式 AppID
1. 登录 [微信公众平台](https://mp.weixin.qq.com/)
2. 开发管理 → 开发设置 → 找到 AppID
3. 成员管理 → 添加项目成员
4. 在 `manifest.json` 中填入 AppID

---

## 🔗 后端配置

如果需要连接后端 API，修改 `utils/api.js` 中的 `baseUrl`：

```javascript
// 本地开发
const baseUrl = 'http://localhost:3000'

// 服务器部署后
const baseUrl = 'https://你的服务器地址'
```

---

## ❓ 还有问题？

请联系项目负责人或在群里提问。




