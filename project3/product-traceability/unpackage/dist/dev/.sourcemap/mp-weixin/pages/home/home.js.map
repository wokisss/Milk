{"version":3,"file":"home.js","sources":["pages/home/home.vue","../../../../Hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaG9tZS9ob21lLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"milk-trace-page\">\n    <!-- 顶部导航栏 -->\n    <view class=\"header\">\n      <view class=\"menu-btn\" @click=\"openMenu\">☰</view>\n      \n      <!-- 搜索栏 -->\n      <view class=\"search-bar\">\n        <input \n          type=\"text\" \n          placeholder=\"搜索溯源信息（如：牦牛牛奶）\" \n          class=\"search-input\" \n          v-model=\"searchKeyword\"\n          @confirm=\"handleSearch\"\n        />\n        <view class=\"search-icon\" @click=\"handleSearch\">\r\n            <image src=\"/static/search.png\" mode=\"aspectFit\" class=\"icon-img\" />\r\n        </view>\r\n        <view class=\"scan-icon\" @click=\"handleScan\">\r\n            <image src=\"/static/scan.png\" mode=\"aspectFit\" class=\"icon-img\" />\r\n         </view>\n      </view>\n      \n      <!-- 地区选择：用微信原生picker组件（底部弹出列表） -->\n      <picker \n        mode=\"selector\" \n        :range=\"provinces\" \n        :value=\"provinceIndex\" \n        @change=\"onProvinceChange\"\n        class=\"location-picker\"\n      >\n        <view class=\"location-select\" hover-class=\"location-hover\">\n          {{ selectedProvince }} ▼\n        </view>\n      </picker>\n    </view>\n\n    <!-- 推荐区域 -->\n    <view class=\"recommend-section\">\n      <view class=\"section-title\">为你推荐</view>\n      \n      <!-- 产品网格 -->\n      <view class=\"product-grid\">\n        <view class=\"product-card\" v-for=\"(item, index) in filteredProducts\" :key=\"index\">\n          <image :src=\"item.product_img\" mode=\"aspectFill\" class=\"product-img\" @error=\"handleImgError(item)\" />\n          <view class=\"product-label\">{{ item.product_name }}</view>\n          <view class=\"product-province\">产地：{{ item.province }}</view>\n        </view>\n      </view>\n\n      <!-- 无数据提示 -->\n      <view v-if=\"filteredProducts.length === 0\" class=\"status-tip\">\n        <image src=\"https://via.placeholder.com/120x120?text=空\" mode=\"aspectFit\" class=\"empty-img\" />\n        <text class=\"empty-text\">暂无匹配的产品~</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\n\n// 所有省份列表（可根据需要扩展）\nconst provinces = ref([\n  '全部', '北京', '天津', '河北', '山西', '内蒙古', '辽宁', '吉林', '黑龙江',\n  '上海', '江苏', '浙江', '安徽', '福建', '江西', '山东', '河南', '湖北', '湖南',\n  '广东', '广西', '海南', '四川', '贵州', '云南', '西藏', '陕西', '甘肃', '青海',\n  '宁夏', '新疆', '台湾', '香港', '澳门'\n]);\n\n// 本地模拟产品数据\nconst localProducts = ref([\n  { product_name: \"牦牛牛奶\", product_img: \"/static/img/product/1.jpg\", province: \"四川\" },\n  { product_name: \"牦牛牛奶\", product_img: \"/static/img/product/2.jpg\", province: \"四川\" },\n  { product_name: \"有机牛奶\", product_img: \"/static/img/product/3.jpg\", province: \"内蒙古\" },\n  { product_name: \"高原牛奶\", product_img: \"/static/img/product/4.jpg\", province: \"青海\" }\n]);\n\n// 响应式数据：选中的省份索引（用于picker组件）\nconst provinceIndex = ref(provinces.value.findIndex(p => p === '四川'));\nconst selectedProvince = ref('四川');\nconst searchKeyword = ref('');\n\n// 筛选产品\nconst filteredProducts = computed(() => {\n  return localProducts.value.filter(item => {\n    const provinceMatch = selectedProvince.value === '全部' || item.province.trim() === selectedProvince.value.trim();\n    const keywordMatch = item.product_name.toLowerCase().includes(searchKeyword.value.trim().toLowerCase());\n    return provinceMatch && keywordMatch;\n  });\n});\n\n// 省份选择变化（picker组件回调）\nconst onProvinceChange = (e) => {\n  const index = e.detail.value;\n  provinceIndex.value = index;\n  selectedProvince.value = provinces.value[index];\n};\n\n// 搜索功能\nconst handleSearch = () => {\n  uni.showToast({ title: `搜索：${searchKeyword.value}`, icon: 'none' });\n};\n\n// 图片加载失败容错\nconst handleImgError = (item) => {\n  item.product_img = `https://via.placeholder.com/200x220?text=${item.product_name}`;\n};\n\n// 菜单功能\nconst openMenu = () => {\n  uni.showToast({ title: '菜单开发中', icon: 'none' });\n};\n\n// 扫码跳转\nconst handleScan = () => {\n  uni.navigateTo({\n    url: '/pages/scan/scan',\n    fail: () => uni.showToast({ title: '跳转扫码页失败', icon: 'none' })\n  });\n};\n</script>\n\n<style scoped>\n/* 基础样式 */\n.milk-trace-page, html, body, page {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  height: 100%;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n.milk-trace-page {\n  background-color: #f5f5f5;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 顶部导航栏 */\n.header {\n  background-color: #1980FF;\n  color: #fff;\n  padding: 12rpx 16rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  /* 确保导航栏不被挤压 */\n  flex-wrap: nowrap;\n}\n\n.menu-btn {\n  font-size: 32rpx;\n  cursor: pointer;\n  padding: 8rpx;\n  /* 固定菜单按钮宽度 */\n  width: 48rpx;\n  text-align: center;\n}\n\n.search-bar {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  background-color: #fff;\n  border-radius: 40rpx;\n  padding: 8rpx 16rpx;\n  margin: 0 16rpx;\n  /* 关键：最小宽度，避免搜索栏被压缩 */\n  min-width: 250rpx;\n  /* 强制不换行 */\n  white-space: nowrap;\n}\n\n/* 关键修改：输入框不允许溢出，图标优先显示 */\n.search-input {\n  border: none;\n  outline: none;\n  flex: 1;\n  font-size: 24rpx;\n  color: #333;\n  padding: 4rpx 0;\n  /* 输入框内容溢出时隐藏，优先保证图标显示 */\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.icon-img {\n  width: 36rpx;\n  height: 36rpx;\n  /* 图标强制显示，不被压缩 */\n  flex-shrink: 0;\n}\n\n.search-icon {\n  /* 搜索图标强制显示，不被压缩 */\n  flex-shrink: 0;\n}\n\n.scan-icon {\n  margin-left: 16rpx;\n  /* 扫码图标强制显示，不被压缩 */\n  flex-shrink: 0;\n}\n\n/* 地区选择：picker组件样式（覆盖默认样式） */\n.location-picker {\n  width: auto;\n  /* 固定地区选择宽度，避免挤压搜索栏 */\n  min-width: 120rpx;\n  flex-shrink: 0;\n}\n\n.location-select {\n  font-size: 24rpx;\n  cursor: pointer;\n  padding: 8rpx 12rpx;\n  border-radius: 8rpx;\n}\n\n.location-hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\n/* 推荐区域 */\n.recommend-section {\n  padding: 24rpx 16rpx;\n  flex: 1;\n  overflow-y: auto;\n}\n\n.section-title {\n  font-size: 28rpx;\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 24rpx;\n  padding-bottom: 8rpx;\n  border-bottom: 3rpx solid #1980FF;\n  display: inline-block;\n}\n\n/* 产品网格 */\n.product-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 20rpx;\n}\n\n.product-card {\n  background-color: #fff;\n  border-radius: 16rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16rpx;\n}\n\n.product-img {\n  width: 100%;\n  height: 220rpx;\n  border-radius: 8rpx;\n  margin-bottom: 16rpx;\n  background-color: #f5f5f5;\n}\n\n.product-label {\n  font-size: 26rpx;\n  color: #333;\n  font-weight: 500;\n  margin-bottom: 8rpx;\n  text-align: center;\n}\n\n.product-province {\n  font-size: 20rpx;\n  color: #999;\n}\n\n/* 无数据提示 */\n.status-tip {\n  text-align: center;\n  margin-top: 120rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.empty-img {\n  width: 120rpx;\n  height: 120rpx;\n  margin-bottom: 20rpx;\n  opacity: 0.6;\n}\n\n.empty-text {\n  font-size: 24rpx;\n  color: #999;\n}\n\n/* 适配 */\n@media (min-width: 750rpx) {\n  .product-grid {\n    gap: 30rpx;\n  }\n  .product-img {\n    height: 280rpx;\n  }\n}\n</style>","import MiniProgramPage from 'D:/桌面/研一/软件工程/product-traceability/pages/home/home.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni"],"mappings":";;;;;;AA+DA,UAAM,YAAYA,cAAAA,IAAI;AAAA,MACpB;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAO;AAAA,MAAM;AAAA,MAAM;AAAA,MACjD;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MACtD;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MACtD;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,MAAM;AAAA,IAC1B,CAAC;AAGD,UAAM,gBAAgBA,cAAAA,IAAI;AAAA,MACxB,EAAE,cAAc,QAAQ,aAAa,6BAA6B,UAAU,KAAM;AAAA,MAClF,EAAE,cAAc,QAAQ,aAAa,6BAA6B,UAAU,KAAM;AAAA,MAClF,EAAE,cAAc,QAAQ,aAAa,6BAA6B,UAAU,MAAO;AAAA,MACnF,EAAE,cAAc,QAAQ,aAAa,6BAA6B,UAAU,KAAM;AAAA,IACpF,CAAC;AAGD,UAAM,gBAAgBA,cAAAA,IAAI,UAAU,MAAM,UAAU,OAAK,MAAM,IAAI,CAAC;AACpE,UAAM,mBAAmBA,cAAAA,IAAI,IAAI;AACjC,UAAM,gBAAgBA,cAAAA,IAAI,EAAE;AAG5B,UAAM,mBAAmBC,cAAQ,SAAC,MAAM;AACtC,aAAO,cAAc,MAAM,OAAO,UAAQ;AACxC,cAAM,gBAAgB,iBAAiB,UAAU,QAAQ,KAAK,SAAS,WAAW,iBAAiB,MAAM,KAAI;AAC7G,cAAM,eAAe,KAAK,aAAa,YAAW,EAAG,SAAS,cAAc,MAAM,OAAO,YAAa,CAAA;AACtG,eAAO,iBAAiB;AAAA,MAC5B,CAAG;AAAA,IACH,CAAC;AAGD,UAAM,mBAAmB,CAAC,MAAM;AAC9B,YAAM,QAAQ,EAAE,OAAO;AACvB,oBAAc,QAAQ;AACtB,uBAAiB,QAAQ,UAAU,MAAM,KAAK;AAAA,IAChD;AAGA,UAAM,eAAe,MAAM;AACzBC,oBAAAA,MAAI,UAAU,EAAE,OAAO,MAAM,cAAc,KAAK,IAAI,MAAM,OAAQ,CAAA;AAAA,IACpE;AAGA,UAAM,iBAAiB,CAAC,SAAS;AAC/B,WAAK,cAAc,4CAA4C,KAAK,YAAY;AAAA,IAClF;AAGA,UAAM,WAAW,MAAM;AACrBA,oBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAAA,IAChD;AAGA,UAAM,aAAa,MAAM;AACvBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,QACL,MAAM,MAAMA,cAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,QAAQ;AAAA,MAChE,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvHA,GAAG,WAAW,eAAe;"}